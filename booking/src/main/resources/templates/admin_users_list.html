<!DOCTYPE html>
<html lang="uk" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ | –ê–¥–º—ñ–Ω</title>
    <link rel="stylesheet" href="/css/beauty-salon.css">
    <style>
        .admin-table-header { background-color: #343a40; color: white; padding: 20px; border-radius: 8px; margin-bottom: 20px;}
        table { width: 100%; border-collapse: collapse; margin-bottom: 40px; }
        th, td { padding: 12px; border-bottom: 1px solid #ddd; text-align: left; }
        th { background-color: #e9ecef; color: #495057; }
        h2 { color: #333; border-bottom: 2px solid #eee; padding-bottom: 10px; margin-top: 30px; }
        
        /* –ë–µ–π–¥–∂—ñ —Ä–æ–ª–µ–π */
        .role-badge { padding: 4px 8px; border-radius: 4px; font-size: 0.8em; color: white; font-weight: bold; }
        .badge-master { background-color: #6f42c1; }
        .badge-client { background-color: #28a745; }
        .badge-banned { background-color: #dc3545; } /* –ß–µ—Ä–≤–æ–Ω–∏–π –¥–ª—è –±–∞–Ω—É */
        
        /* –ö–Ω–æ–ø–∫–∏ –¥—ñ–π */
        .btn-action { border: none; cursor: pointer; padding: 6px 12px; border-radius: 4px; color: white; font-size: 13px; text-decoration: none; display: inline-block;}
        .btn-confirm { background-color: #28a745; } /* –ó–µ–ª–µ–Ω–∞ */
        .btn-cancel { background-color: #ffc107; color: black; } /* –ñ–æ–≤—Ç–∞ */
        .btn-ban { background-color: #dc3545; color: white; border: none; cursor: pointer; padding: 6px 12px; border-radius: 4px; font-size: 13px; font-weight: bold;}
        .btn-unban { background-color: #17a2b8; color: white; border: none; cursor: pointer; padding: 6px 12px; border-radius: 4px; font-size: 13px; font-weight: bold;}
        
        .btn-ban:hover { background-color: #c82333; }
        .btn-unban:hover { background-color: #138496; }
    </style>
</head>
<body>
    <div class="dashboard-card" style="width: 90%; max-width: 1200px;">
        <div class="content">
            
            <div class="admin-table-header">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <h1>–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏</h1>
                    <a href="/auth/admin/dashboard" class="btn-primary" style="background-color: #6c757d; text-decoration: none;">‚Üê –ù–∞–∑–∞–¥</a>
                </div>
            </div>

            <!-- 1. –¢–ê–ë–õ–ò–¶–Ø –ú–ê–ô–°–¢–†–Ü–í -->
            <h2>–°–ø–∏—Å–æ–∫ –ú–∞–π—Å—Ç—Ä—ñ–≤ (Master)</h2>
            <div th:if="${#lists.isEmpty(masters)}"><p>–ú–∞–π—Å—Ç—Ä—ñ–≤ –Ω–µ–º–∞—î.</p></div>
            <table th:if="${not #lists.isEmpty(masters)}">
                <thead>
                    <tr>
                        <th>–Ü–º'—è</th>
                        <th>Email</th>
                        <th>–¢–µ–ª–µ—Ñ–æ–Ω</th>
                        <th>–†–æ–ª—å</th>
                        <th>–î—ñ—è</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="m : ${masters}">
                        <td th:text="${m.name}" style="font-weight: bold;"></td>
                        <td th:text="${m.email}"></td>
                        <td th:text="${m.phone}"></td>
                        <td><span class="role-badge badge-master">MASTER</span></td>
                        <td>
                            <div style="display: flex; gap: 5px;">
                                <!-- –ü–æ–Ω–∏–∑–∏—Ç–∏ -->
                                <form th:action="@{/web/admin/users/{id}/change-role(id=${m.userId}, role='CLIENT')}" method="post" onsubmit="return confirm('–ü–æ–Ω–∏–∑–∏—Ç–∏ –¥–æ –ö–ª—ñ—î–Ω—Ç–∞?');">
                                    <button type="submit" class="btn-action btn-cancel">‚ñº Client</button>
                                </form>
                                <!-- –ë–ê–ù -->
                                <form th:action="@{/web/admin/users/{id}/change-role(id=${m.userId}, role='BANNED')}" method="post" onsubmit="return confirm('–ó–ê–ë–õ–û–ö–£–í–ê–¢–ò —Ü—å–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞?');">
                                    <button type="submit" class="btn-ban">‚õî BAN</button>
                                </form>
                                <!-- –†–æ–∑–∫–ª–∞–¥ -->
                                <a th:href="@{/web/admin/masters/{id}/schedule(id=${m.userId})}" class="btn-action btn-confirm" style="background-color: #007bff;">–†–æ–∑–∫–ª–∞–¥</a>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>

            <!-- 2. –¢–ê–ë–õ–ò–¶–Ø –ö–õ–Ü–Ñ–ù–¢–Ü–í -->
            <h2>–°–ø–∏—Å–æ–∫ –ö–ª—ñ—î–Ω—Ç—ñ–≤ (Client)</h2>
            <div th:if="${#lists.isEmpty(clients)}"><p>–ö–ª—ñ—î–Ω—Ç—ñ–≤ –Ω–µ–º–∞—î.</p></div>
            <table th:if="${not #lists.isEmpty(clients)}">
                <thead>
                    <tr>
                        <th>–Ü–º'—è</th>
                        <th>Email</th>
                        <th>–¢–µ–ª–µ—Ñ–æ–Ω</th>
                        <th>–†–æ–ª—å</th>
                        <th>–î—ñ—è</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="c : ${clients}">
                        <td th:text="${c.name}"></td>
                        <td th:text="${c.email}"></td>
                        <td th:text="${c.phone}"></td>
                        <td><span class="role-badge badge-client">CLIENT</span></td>
                        <td>
                            <div style="display: flex; gap: 5px;">
                                <!-- –ü—ñ–¥–≤–∏—â–∏—Ç–∏ -->
                                <form th:action="@{/web/admin/users/{id}/change-role(id=${c.userId}, role='MASTER')}" method="post" onsubmit="return confirm('–ü—ñ–¥–≤–∏—â–∏—Ç–∏ –¥–æ –ú–∞–π—Å—Ç—Ä–∞?');">
                                    <button type="submit" class="btn-action btn-confirm">‚ñ≤ Master</button>
                                </form>
                                <!-- –ë–ê–ù -->
                                <form th:action="@{/web/admin/users/{id}/change-role(id=${c.userId}, role='BANNED')}" method="post" onsubmit="return confirm('–ó–ê–ë–õ–û–ö–£–í–ê–¢–ò —Ü—å–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞?');">
                                    <button type="submit" class="btn-ban">‚õî BAN</button>
                                </form>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>

            <!-- 3. –¢–ê–ë–õ–ò–¶–Ø –ó–ê–ë–õ–û–ö–û–í–ê–ù–ò–• (–ù–û–í–ï) -->
            <h2 style="color: #dc3545;">üö´ –ó–∞–±–ª–æ–∫–æ–≤–∞–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ</h2>
            <div th:if="${#lists.isEmpty(banned)}"><p>–ó–∞–±–ª–æ–∫–æ–≤–∞–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –Ω–µ–º–∞—î.</p></div>
            <table th:if="${not #lists.isEmpty(banned)}" style="border: 2px solid #dc3545;">
                <thead>
                    <tr>
                        <th>–Ü–º'—è</th>
                        <th>Email</th>
                        <th>–†–æ–ª—å</th>
                        <th>–î—ñ—è</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="b : ${banned}">
                        <td th:text="${b.name}" style="color: #dc3545; font-weight: bold;"></td>
                        <td th:text="${b.email}"></td>
                        <td><span class="role-badge badge-banned">BANNED</span></td>
                        <td>
                            <!-- –†–û–ó–ë–ê–ù–ò–¢–ò (–ø–æ–≤–µ—Ä—Ç–∞—î–º–æ –¥–æ —Å—Ç–∞—Ç—É—Å—É CLIENT) -->
                            <form th:action="@{/web/admin/users/{id}/change-role(id=${b.userId}, role='CLIENT')}" method="post" onsubmit="return confirm('–†–æ–∑–±–ª–æ–∫—É–≤–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞?');">
                                <button type="submit" class="btn-unban">‚úÖ –†–æ–∑–±–∞–Ω–∏—Ç–∏</button>
                            </form>
                        </td>
                    </tr>
                </tbody>
            </table>

        </div>
    </div>
</body>
</html>